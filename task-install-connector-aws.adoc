---
sidebar: sidebar 
permalink: task-install-connector-aws.html 
keywords: install connector, aws connector installation, aws connector, install connector in aws, bluexp, aws marketplace, manual install, create connector 
summary: 'Créez un connecteur directement à partir de la console web BlueXP, d"AWS Marketplace ou en installant le logiciel sur votre propre hôte Linux.' 
---
= Créez un connecteur dans AWS
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Créez un connecteur directement à partir de la console web BlueXP, d'AWS Marketplace ou en installant le logiciel sur votre propre hôte Linux.

[role="tabbed-block"]
====
.BlueXP
--
.Avant de commencer
Vous devez disposer des éléments suivants :

* Méthode d'authentification AWS : rôle IAM ou clés d'accès pour un utilisateur IAM disposant des autorisations requises.
+
link:task-set-up-permissions-aws.html["Découvrez comment configurer des autorisations AWS"]

* VPC et sous-réseau qui répondent aux exigences réseau.
+
link:task-set-up-networking-aws.html["En savoir plus sur les exigences de mise en réseau"]

* Une paire de clés pour l'instance EC2.
* Détails sur un serveur proxy, si un proxy est requis pour accéder à Internet à partir du connecteur.


.Étapes
. Sélectionnez la liste déroulante *Connector* et sélectionnez *Ajouter un connecteur*.
+
image:screenshot_connector_add.gif["Capture d'écran affichant l'icône du connecteur dans l'en-tête et l'action Ajouter un connecteur."]

. Choisissez *Amazon Web Services* comme fournisseur de cloud et sélectionnez *Continuer*.
. Sur la page *déploiement d'un connecteur*, consultez les détails de ce dont vous aurez besoin. Vous avez deux options :
+
.. Sélectionnez *Continuer* pour préparer le déploiement à l'aide du guide produit. Chaque étape du guide du produit inclut les informations contenues sur cette page de la documentation.
.. Sélectionnez *passer au déploiement* si vous êtes déjà préparé en suivant les étapes de cette page.


. Suivez les étapes de l'assistant pour créer le connecteur :
+
** *Soyez prêt*: Passez en revue ce dont vous aurez besoin.
** *Informations d'identification AWS* : spécifiez votre région AWS puis choisissez une méthode d'authentification, qui est soit un rôle IAM que BlueXP peut assumer, soit une clé d'accès AWS et une clé secrète.
+

TIP: Si vous choisissez *supposons rôle*, vous pouvez créer le premier ensemble d'informations d'identification à partir de l'assistant de déploiement de connecteur. Tout ensemble supplémentaire d'informations d'identification doit être créé à partir de la page informations d'identification. Ils seront ensuite disponibles à partir de l'assistant dans une liste déroulante. link:task-adding-aws-accounts.html["Découvrez comment ajouter des identifiants supplémentaires"].

** *Détails* : fournir des détails sur le connecteur.
+
*** Entrez un nom pour l'instance.
*** Ajoutez des balises personnalisées (métadonnées) à l'instance.
*** Choisissez si vous souhaitez que BlueXP crée un nouveau rôle avec les autorisations requises, ou si vous souhaitez sélectionner un rôle existant que vous avez configuré avec link:reference-permissions-aws.html["les autorisations requises"].
*** Indiquez si vous souhaitez chiffrer les disques EBS du connecteur. Vous pouvez utiliser la clé de chiffrement par défaut ou utiliser une clé personnalisée.


** *Network* : spécifiez un VPC, un sous-réseau et une paire de clés pour l'instance, choisissez d'activer ou non une adresse IP publique et, éventuellement, spécifiez une configuration proxy.
+
Assurez-vous que vous disposez de la paire de clés appropriée à utiliser avec le connecteur. Sans paire de clés, vous ne pourrez pas accéder à la machine virtuelle Connector.

** *Groupe de sécurité* : choisissez de créer un nouveau groupe de sécurité ou de sélectionner un groupe de sécurité existant qui autorise les règles entrantes et sortantes requises.
+
link:reference-ports-aws.html["Afficher les règles des groupes de sécurité pour AWS"].

** *Review* : consultez vos sélections pour vérifier que votre configuration est correcte.


. Sélectionnez *Ajouter*.
+
L'instance doit être prête dans environ 7 minutes. Vous devez rester sur la page jusqu'à ce que le processus soit terminé.



.Résultat
Une fois le processus terminé, le connecteur est disponible pour être utilisé depuis BlueXP.

--
.AWS Marketplace
--
.Avant de commencer
Vous devez disposer des éléments suivants :

* VPC et sous-réseau qui répondent aux exigences réseau.
+
link:task-set-up-networking-aws.html["En savoir plus sur les exigences de mise en réseau"].

* Un rôle IAM avec une stratégie jointe qui inclut les autorisations requises pour le connecteur.
+
link:task-set-up-permissions-aws.html["Découvrez comment configurer des autorisations AWS"].

* Autorisations de vous abonner à AWS Marketplace et de vous désabonner pour votre utilisateur IAM.
* Compréhension des exigences en termes de CPU et de RAM pour l'instance.
+
link:reference-host-requirements-aws.html["Passez en revue les exigences relatives aux instances"].

* Une paire de clés pour l'instance EC2.


.Étapes
. Accédez au https://aws.amazon.com/marketplace/pp/B018REK8QG["BlueXP, page sur AWS Marketplace"^]
. Sur la page Marketplace, sélectionnez *Continuer pour s'abonner*, puis sélectionnez *Continuer à la configuration*.
+
image:screenshot-subscribe-aws.png["Une capture d'écran affiche les boutons Continuer à s'abonner et Continuer la configuration sur AWS Marketplace."]

. Modifiez l'une des options par défaut et sélectionnez *Continuer pour lancer*.
. Sous *Choisissez action*, sélectionnez *lancer via EC2*, puis *lancer*.
+
Ces étapes décrivent comment lancer l'instance à partir de la console EC2, car la console vous permet d'associer un rôle IAM à l'instance de connecteur. Cela n'est pas possible en utilisant l'action *lancer à partir du site Web*.

. Suivez les invites pour configurer et déployer l'instance :
+
** *Nom et balises* : saisissez un nom et des balises pour l'instance.
** *Image de l'application et de l'OS* : passez cette section. Le connecteur ami est déjà sélectionné.
** *Type d'instance* : en fonction de la disponibilité de la région, choisissez un type d'instance qui répond aux exigences de RAM et de CPU (t3.xlarge est recommandé).
** *Paire de clés (login)* : sélectionnez la paire de clés que vous souhaitez utiliser pour vous connecter en toute sécurité à l'instance.
** *Paramètres réseau* : modifiez les paramètres réseau selon vos besoins :
+
*** Choisissez le VPC et le sous-réseau souhaités.
*** Spécifiez si l'instance doit avoir une adresse IP publique.
*** Spécifiez les paramètres de pare-feu qui activent les méthodes de connexion requises pour l'instance de connecteur : SSH, HTTP et HTTPS.
+
Quelques règles supplémentaires sont requises pour des configurations spécifiques.

+
link:reference-ports-aws.html["Afficher les règles des groupes de sécurité pour AWS"].



** *Configurer le stockage* : conservez les options de stockage par défaut.
** *Détails avancés* : sous *profil d'instance IAM*, choisissez le rôle IAM qui inclut les autorisations requises pour le connecteur.
** *Résumé* : passez en revue le résumé et sélectionnez *lancer l'instance*.


+
AWS lance le logiciel avec les paramètres spécifiés. L'instance de connecteur et le logiciel doivent s'exécuter dans environ cinq minutes.

. Ouvrez un navigateur Web à partir d'un hôte connecté à la machine virtuelle Connector et entrez l'URL suivante :
+
https://_ipaddress_[]

. Une fois connecté, configurez le connecteur :
+
.. Spécifiez le compte BlueXP à associer au connecteur.
.. Entrez un nom pour le système.
.. Sous *exécutez-vous dans un environnement sécurisé ?* maintenez le mode restreint désactivé.
+
Vous devez désactiver le mode restreint, car ces étapes décrivent l'utilisation de BlueXP en mode standard. Vous devez activer le mode restreint uniquement si vous disposez d'un environnement sécurisé et souhaitez déconnecter ce compte des services back-end BlueXP. Si c'est le cas, link:task-quick-start-restricted-mode.html["Suivez les étapes pour démarrer avec BlueXP en mode restreint"].

.. Sélectionnez *commençons*.




.Résultat
Le connecteur est maintenant installé et configuré avec votre compte BlueXP.

Ouvrez un navigateur Web et accédez au https://console.bluexp.netapp.com["Console BlueXP"^] Pour commencer à utiliser le connecteur avec BlueXP.

--
.Installation manuelle
--
.Avant de commencer
Vous devez disposer des éléments suivants :

* Privilèges root pour installer le connecteur.
* Détails sur un serveur proxy, si un proxy est requis pour accéder à Internet à partir du connecteur.
+
Vous avez la possibilité de configurer un serveur proxy après l'installation, mais cela nécessite de redémarrer le connecteur.

* Un certificat signé par une autorité de certification, si le serveur proxy utilise HTTPS ou si le proxy est un proxy interceptant.


.Description de la tâche
Le programme d'installation disponible sur le site du support NetApp peut être une version antérieure. Après l'installation, le connecteur se met automatiquement à jour si une nouvelle version est disponible.

.Étapes
. Vérifiez que docker est activé et exécuté.
+
[source, cli]
----
sudo systemctl enable docker && sudo systemctl start docker
----
. Si les variables système _http_proxy_ ou _https_proxy_ sont définies sur l'hôte, supprimez-les :
+
[source, cli]
----
unset http_proxy
unset https_proxy
----
+
Si vous ne supprimez pas ces variables système, l'installation échouera.

. Téléchargez le logiciel du connecteur à partir du https://mysupport.netapp.com/site/products/all/details/cloud-manager/downloads-tab["Site de support NetApp"^], Puis copiez-le sur l'hôte Linux.
+
Vous devez télécharger le programme d'installation du connecteur « en ligne » destiné à être utilisé sur votre réseau ou dans le cloud. Un programme d'installation séparé « hors ligne » est disponible pour le connecteur, mais il n'est pris en charge que pour les déploiements en mode privé.

. Attribuez des autorisations pour exécuter le script.
+
[source, cli]
----
chmod +x OnCommandCloudManager-<version>
----
+
Où <version> est la version du connecteur que vous avez téléchargé.

. Exécutez le script d'installation.
+
[source, cli]
----
 ./OnCommandCloudManager-<version> --proxy <HTTP or HTTPS proxy server> --cacert <path and file name of a CA-signed certificate>
----
+
Les paramètres --proxy et --cacert sont facultatifs. Si vous disposez d'un serveur proxy, vous devez entrer le ou les paramètres comme indiqué. Le programme d'installation ne vous invite pas à fournir des informations sur un proxy.

+
Voici un exemple de commande utilisant les deux paramètres facultatifs :

+
[source, cli]
----
 ./OnCommandCloudManager-V3.9.26 --proxy https://user:password@10.0.0.30:8080/ --cacert /tmp/cacert/certificate.cer
----
+
--proxy configure le connecteur pour utiliser un serveur proxy HTTP ou HTTPS à l'aide de l'un des formats suivants :

+
** \http://address:port
** \http://username:password@address:port
** \https://address:port
** \https://username:password@address:port
+
L'utilisateur doit être un utilisateur local. Les utilisateurs du domaine ne sont pas pris en charge.



+
--cacert spécifie un certificat signé par une autorité de certification à utiliser pour l'accès HTTPS entre le connecteur et le serveur proxy. Ce paramètre est requis uniquement si vous spécifiez un serveur proxy HTTPS ou si le proxy est un proxy interceptant.

. Attendez la fin de l'installation.
+
À la fin de l'installation, le service connecteur (ocm) redémarre deux fois si vous avez spécifié un serveur proxy.

. Ouvrez un navigateur Web à partir d'un hôte connecté à la machine virtuelle Connector et entrez l'URL suivante :
+
https://_ipaddress_[]

. Une fois connecté, configurez le connecteur :
+
.. Spécifiez le compte BlueXP à associer au connecteur.
.. Entrez un nom pour le système.
.. Sous *exécutez-vous dans un environnement sécurisé ?* maintenez le mode restreint désactivé.
+
Vous devez désactiver le mode restreint, car ces étapes décrivent l'utilisation de BlueXP en mode standard. Vous devez activer le mode restreint uniquement si vous disposez d'un environnement sécurisé et souhaitez déconnecter ce compte des services back-end BlueXP. Si c'est le cas, link:task-quick-start-restricted-mode.html["Suivez les étapes pour démarrer avec BlueXP en mode restreint"].

.. Sélectionnez *commençons*.




.Résultat
Le connecteur est maintenant installé et configuré avec votre compte BlueXP.

.Et la suite ?
link:task-provide-permissions-aws.html["Fournissez à BlueXP les autorisations que vous avez précédemment configurées"].

--
====